# 3. 데이터베이스

## 3-1. 데이터의 구조화와 관계형 데이터베이스

> 여러 사용자와 응용시스템들이 사용 목적은 다르지만 공통의 데이터를 서로 공유해서 사용할 수 있도록 통합하여 저장관리 하는 모임

- 통합 데이터

  연관성 있는 데이터, 중복 부분의 최소화

- 저장 데이터

  자기 디스크 등 컴퓨터로 접근 가능한 매체에 기록

- 운영 데이터

  조직의 존재 목적이나 기능을 수행하는 데 필수인 데이터

- 공용 데이터

  여러 사용자와 여러 응용 시스템으로부터 공유 접근 가능

### 데이터베이스 특징

- 실시간 접근성(real-time accessibility)

  사용자나 응용시스템에서 요구하는 질의에 대해서 데이터를 실시간으로 처리한 뒤 바로 응답할 수 있어야함

- 동시 공유 (concurrent sharing)

  여러 사용자와 응용시스템이 동시에 (서로 다른 목적) 원하는 데이터에 접근할 수 있어야함

- 지속적인 변화 (continuous evolution)

  새로운 데이터의 CRUD 등의 작업을 통해 항상 최신의 데이터를 정확하게 유지하고 있어야함

- 내용에 의한 참조 (content reference)

  데이터의 위치에 상관없이 사용자가 원하는 내용으로 참조 할 수 있어야함

### 데이터베이스 구성요소

`개체`, `속성`, 그리고 개체 사이의 `관계`

### 장점

- 중복 최소화

- 무결성

  정확한 정보 보장

- 일관성

- 독립성

  물리적, 논리적

- 표준화

- 보안 유지

### 관계형 데이터베이스

개체와 개체 사이의 관계를 표현하기 위하여 2차원의 표를 사용

- key

  한 튜플을 다른 튜플들과 구별하는 하나 이상의 속성의 집합

  기본키, 외부키

  - 참조 무결성

    참조 할수 없는 외래키값을 가질 수 없음

    (선수-구단 관계에서 없는 팀 코드를 넣는 것)

  - 개체 무결성

    기본키에 속하는 속성은 비어 있을수 없음

### 관계형 대수 연산

- 관계형 데이터베이스에서

  릴레이션을 대상으로 릴레이션을 만들어 수학적 연산의 집합

  이것들을 조합하여 데이터베이스 내의 데이터 조작 가능

- 합집합, 교집합, 차집합, 곱집합, 프로젝션, 셀렉션, 조인

- 참고: 릴레이션 vs 테이블

  - 테이블은 데이터베이스의 데이터가 저장된 물리적 구조

  - 릴레이션은 데이터베이스 모델링에서 주로 쓰이는

    추가의 제약조건이 존재하며, 물리적으로 저장되어 있지 않은 릴레이션들을 동적으로 생성 가능

### SQL(Structured Query Language)

- DML (manipulation)

- DDL (definition)

- DCL (control)

- TCL (transaction control)

### 트랜잭션

- 데이터베이스 관리시스템 에서 상호작용 단위

  데이터베이스의 데이터 무결성 (또는 완전성) 유지 확신을 위하여 지원되어야함

- 트랜잭션을 지원하는 데이터베이스를 transaction database 라고 부름

  현재 대부분 관계형 DBMS 는 transactional DB

- 트랜잭션이 가지는 (만족해야하는) 속성: ACID

  - 원자성 (atomicity) : 하나의 트랜잭션은 모두 실행되거나 전혀 실행되지 않아야함

  - 일관성 (consistency) : 트랜잭션의 실행 전후에 데이터베이스 상태가 일관되어야함

  - 독립성 (isolation) : 여러 트랜잭션이 병렬 실행되는 경우에도 서로 간섭하지 않도록 격리되어야함

  - 영구성 (durability) : 완료된 트랜잭션의 실행 결과는 데이터베이스에 영구 보존되어야함

## 3-2. ORM 과 데이터베이스의 활용

### ORM (Object-Relational Mapper)

- 관계형 데이터베이스의 테이블과 객체지향 프로그램의 클래스 사이를 연결

- ORM의 활용으로 얻는 이점

  - sql 문장이 아닌 클래스의 메서드를 이용한 데이터베이스 접근/ 조작

  - 코드의 재사용성, 유지보수, 리팩토링 용이

  - DBMS 종속성 감소

- ORM 의 한계

  객체와 릴레이션 사이의 불일치에 기인하여 발생하는 비효율

## 3-3. 벡터 데이터베이스와 유사도 검색

### 비정형 데이터

- 정의

  설계된 모델이나 구조로 구성되지 않는 데이터

  질적인것으로 분류되며 인간 또는 기계에 의하여 생성됨

- ex

  리치미디어: 오디오, 비디오, 카메라, 지리 공간 데이터, 날씨

  사물 인터넷 데이터

  텍스트 데이터: 이메일, 통신데이터

  과학적 데이터: 기계가 생상한 우주 탐사, 지진 보고서

  의료데이터: MRI, CT등 의료데이터

### 비정형 데이터 처리의 어려움

- 방대한 볼륨

  기존데이터의 80% 분량을 차지하며 지속적으로 많은 데이터가 생성되고 있음

- 다양성

  다양한 데이터 유형으로 구성되어 있어 저장과 상호 참조에 연관된 어려움

- 품질

  일관성이 보장되지 않으며 오류 및 불일치 등이 존재

- 보안 및 개인정보 보호

  중요하거나 민감한 데이터가 포함되어 있을 수 있으며, 정교하게 판단하고 보안성 유지 어려움

- 통합

  정의된 모델이 없어 정형데이터와 통합하는데 어려움

### 벡터데이터 베이스

- 벡터

  데이터 객체를 수치화하여 표현한 것

  때로는 벡터의 차원이 매우 높을 수 있음

- 벡터 임베딩 (Vetctor Embedding)

  - 주제, 단어, 이미지 또는 기타 데이터를 숫자로 표현한것

  - 대규모 언어 모델 (LLM) 및 기타 AI 모델에 의하여 생성되는 것이 일반적

  - 각 벡터 임베딩 사이의 거리를 계산하여 검색엔진이 벡터간의 유사성을 정의할 수 있음

  - 벡터 임베딩을 색인하고 질의하는 방식의 벡터 데이터베이스를 이용하여 데이터 저장 및 검색 실행

- ex

  - Word Embedding

    많은 양의 문서를 분석하여 단어들 사이의 통계적 유사성을 도출하여 벡터 공간을 구성

  - LSH (Locality-Sensitive Hashing)

    유사도가 높은 입력값들이 높은 확률로 같은 버킷에 해시되도록하여 낮은 시간 복잡도로 유사한 벡터를

    찾을 수 있도록 하는 기법

    - 고차원 벡터공간을 여러개의 해시 버킷으로 분할하는 해시 함수

    - 데이터 클러스터링 및 유사도 검색에 활용

    오디오/ 비디오 fingerprinting 등에 널리 이용됨

  - ANNOY

    Approximate Nearest Neighbours Oh Yeah

    최근접 이웃의 정확도를 포기하고 시간비용을 크게 절감하는 근사 검색 기법

    - 벡터공간에서 임의의 두점을 선택하고, 이 두점 사이의 초평면으로 벡터공간 분활

    - 분할된 공간에 포함된 점(벡터, 데이터 포인트) 들의 개수를 노드로 하는 이진트리 생성

    - 각 노드에 포함된 점들의 개수가 k개 미만이 될때까지 위 과정을 반복하여 최종 검색 트리 완성

    - 퀴리 입력(벡터)을 검색트리에서 검색한 뒤 해당 부분공간에서 최근접 이웃을 검색

### 벡터 데이터베이스 활용

- AI/ML 응용

  의미 정보 검색 및 장기 기억을 통하여 AI 기능 향상

- 유사도 기반 추천 시스템

  선택된 아이템과 유사한 아이템을 검색하여 추천 알고리즘 적용

- NLP (Natural Language Processing; 자연어 처리) 응용

  텍스트임베딩을 통하여 자연어 이해 및 생성에 적용

- 이미지인식 및 검색 응용

  유사하거나 일치하는 이미지를 검색하기 위하여 특성 벡터를 추출하고 이것을 데이터베이스화

## 3-4. NoSQL 데이터베이스

RDBMS 와 다른 방식의 데이터를 저장하고 색인

실시간 웹 응용 및 빅데이터 응용에 널리 이용됨

### 이점

- 유연성

  엄격한 스키마 없이 자유로운 형식으로 데이터 저장하고 활용, 프로그래밍 효율 증대

- 확장성

  일관성의 일부 양보를 통한 확장 향상

- 고성능

  RDBMS에 비하여 느스한 제약에 의하여 높은 입출력 성능 도모

### 종류

- key-Value

- Document

- Column-Family

- Graph

### 활용

- RDBMS를 대체할 것으로 보이진 않음

- ACID 트랜잭션의 지원이 필수가 아닌 시스템에서는 응용이 확대될 전망

- 분산 데이터베이스로 고성능 서비스를 구축하는데 적합
